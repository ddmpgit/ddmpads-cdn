// DDMPADS - DTVA
// Gerado em: 2025-06-09T01:33:26.297Z
// NAO EDITE ESTE ARQUIVO - Gerado automaticamente
// Vers?o: SUPER OTIMIZADA

(function(){'use strict';
const CONFIG={"gam":"111315806","prefix":"drama_theviralapps","fileName":"ddmpads-dtva.js","siteName":"DTVA","priceKey":"ddmp_price","defaultPrice":"0.00","refresh":{"enabled":true,"delay":30,"interval":30,"maxCount":1}};
const AD_UNITS={"mobile":{"byKey":{"all|all|anchor":[{"type":"anchor","source":"all","country":"all","version":"","page":"*","enabled":true,"outOfPage":true,"noRefresh":true,"_score":0}],"facebook|all|anchor":[{"type":"anchor","source":"facebook","country":"all","version":"","page":"*","enabled":false,"outOfPage":true,"noRefresh":true,"_score":4}],"all|all|content":[{"type":"content","source":"all","country":"all","version":"","page":"*","enabled":false,"sizes":[[300,250],[336,280]],"divId":"div-content","_score":0}],"all|all|interstitial":[{"type":"interstitial","source":"all","country":"all","version":"","page":"*","enabled":"","outOfPage":true,"noRefresh":true,"_score":0}],"all|all|top":[{"type":"top","source":"all","country":"all","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":0}],"all|us|top":[{"type":"top","source":"all","country":"us","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2}],"all|mx|top":[{"type":"top","source":"all","country":"mx","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2}],"all|in|top":[{"type":"top","source":"all","country":"in","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2}],"all|cl|top":[{"type":"top","source":"all","country":"cl","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2}],"all|ca|top":[{"type":"top","source":"all","country":"ca","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2}],"all|uk|top":[{"type":"top","source":"all","country":"uk","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2}],"all|es|top":[{"type":"top","source":"all","country":"es","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2}],"all|br|top":[{"type":"top","source":"all","country":"br","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2}]},"byPage":{},"patterns":[],"all":[{"type":"anchor","source":"all","country":"all","version":"","page":"*","enabled":true,"outOfPage":true,"noRefresh":true,"_score":0},{"type":"anchor","source":"facebook","country":"all","version":"","page":"*","enabled":false,"outOfPage":true,"noRefresh":true,"_score":4},{"type":"content","source":"all","country":"all","version":"","page":"*","enabled":false,"sizes":[[300,250],[336,280]],"divId":"div-content","_score":0},{"type":"interstitial","source":"all","country":"all","version":"","page":"*","enabled":"","outOfPage":true,"noRefresh":true,"_score":0},{"type":"top","source":"all","country":"all","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":0},{"type":"top","source":"all","country":"us","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2},{"type":"top","source":"all","country":"mx","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2},{"type":"top","source":"all","country":"in","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2},{"type":"top","source":"all","country":"cl","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2},{"type":"top","source":"all","country":"ca","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2},{"type":"top","source":"all","country":"uk","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2},{"type":"top","source":"all","country":"es","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2},{"type":"top","source":"all","country":"br","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2}]},"desktop":{"byKey":{"all|all|anchor":[{"type":"anchor","source":"all","country":"all","version":"","page":"*","enabled":true,"outOfPage":true,"noRefresh":true,"_score":0}],"facebook|all|anchor":[{"type":"anchor","source":"facebook","country":"all","version":"","page":"*","enabled":false,"outOfPage":true,"noRefresh":true,"_score":4}],"all|all|content":[{"type":"content","source":"all","country":"all","version":"","page":"*","enabled":false,"sizes":[[300,250],[336,280]],"divId":"div-content","_score":0}],"all|all|interstitial":[{"type":"interstitial","source":"all","country":"all","version":"","page":"*","enabled":"","outOfPage":true,"noRefresh":true,"_score":0}],"all|all|sidebar":[{"type":"sidebar","source":"all","country":"all","version":"","page":"*","enabled":false,"sizes":[[300,250],[336,280]],"divId":"div-sidebar","noRefresh":true,"_score":0}],"all|all|top":[{"type":"top","source":"all","country":"all","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":0}],"all|us|top":[{"type":"top","source":"all","country":"us","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2}],"all|mx|top":[{"type":"top","source":"all","country":"mx","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2}],"all|in|top":[{"type":"top","source":"all","country":"in","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2}],"all|cl|top":[{"type":"top","source":"all","country":"cl","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2}],"all|ca|top":[{"type":"top","source":"all","country":"ca","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2}],"all|uk|top":[{"type":"top","source":"all","country":"uk","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2}],"all|es|top":[{"type":"top","source":"all","country":"es","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2}],"all|br|top":[{"type":"top","source":"all","country":"br","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2}]},"byPage":{},"patterns":[],"all":[{"type":"anchor","source":"all","country":"all","version":"","page":"*","enabled":true,"outOfPage":true,"noRefresh":true,"_score":0},{"type":"anchor","source":"facebook","country":"all","version":"","page":"*","enabled":false,"outOfPage":true,"noRefresh":true,"_score":4},{"type":"content","source":"all","country":"all","version":"","page":"*","enabled":false,"sizes":[[300,250],[336,280]],"divId":"div-content","_score":0},{"type":"interstitial","source":"all","country":"all","version":"","page":"*","enabled":"","outOfPage":true,"noRefresh":true,"_score":0},{"type":"sidebar","source":"all","country":"all","version":"","page":"*","enabled":false,"sizes":[[300,250],[336,280]],"divId":"div-sidebar","noRefresh":true,"_score":0},{"type":"top","source":"all","country":"all","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":0},{"type":"top","source":"all","country":"us","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2},{"type":"top","source":"all","country":"mx","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2},{"type":"top","source":"all","country":"in","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2},{"type":"top","source":"all","country":"cl","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2},{"type":"top","source":"all","country":"ca","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2},{"type":"top","source":"all","country":"uk","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2},{"type":"top","source":"all","country":"es","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2},{"type":"top","source":"all","country":"br","version":"","page":"*","enabled":"","sizes":[[300,250],[336,280]],"divId":"div-top","noRefresh":true,"_score":2}]}};
const PRICE_RULES={"tree":{"mobile":{"drama_theviralapps_mob_top":{"*":{"google":{"/teste-ad":"1.00","*":"0.00"}}},"drama_theviralapps_facebook_us_mob_top":{"us":{"facebook":{"*":"1.00"}}}},"*":{"*":{"*":{"*":{"*":"0.00"}}}}},"flat":{"drama_theviralapps_mob_top|*|mobile|google|/teste-ad":"1.00","drama_theviralapps_mob_top|*|mobile|google|*":"0.00","drama_theviralapps_facebook_us_mob_top|us|mobile|facebook|*":"1.00","*|*|*|*|*":"0.00"}};
const Utils={isMobile:()=>/Mobi|Android/i.test(navigator.userAgent)||768>=window.innerWidth,getGeo(){const a=new URLSearchParams(window.location.search),b=a.get("test_geo")||a.get("geo");if(b)return sessionStorage.setItem("ddmp_geo",b.toUpperCase()),b.toUpperCase();const c=sessionStorage.getItem("ddmp_geo");return c||"all"},getUtmParams(){const a=new URLSearchParams(window.location.search),b={};return["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].forEach(c=>{b[c]=a.get(c)||sessionStorage.getItem(c)||"direct",a.get(c)&&sessionStorage.setItem(c,a.get(c))}),b}};class DDMPAds{constructor(){const t=performance.now();this.slots=[],this.refreshableSlots=[],this.device=Utils.isMobile()?"mobile":"desktop",this.geo=Utils.getGeo(),this.utms=Utils.getUtmParams(),this.path=window.location.pathname.replace(/\/$/,""),this.source=this.utms.utm_source||"direct",this.priceCache=new Map(),console.log(`[DDMPADS] Constructor: ${(performance.now()-t).toFixed(1)}ms`)}init(){const t=performance.now();window.googletag=window.googletag||{cmd:[]};const a=this.getFilteredAdUnits(),b={"top":1,"interstitial":2,"anchor":3,"content":4,"sidebar":5},c=a.sort((d,e)=>(b[d.type]||99)-(b[e.type]||99));c.forEach(d=>this.createSlot(d)),googletag.cmd.push(()=>this.setupGPT()),console.log(`[DDMPADS] Init total: ${(performance.now()-t).toFixed(1)}ms`)}getFilteredAdUnits(){const t=performance.now(),u=AD_UNITS[this.device],r=new Map();if(!u||!u.all){console.error("[DDMPADS] No units for device:",this.device);return[]}const s=this.source,g=this.geo.toLowerCase(),p=this.path;if(u.byPage&&u.byPage[p]){u.byPage[p].forEach(a=>{if((!a.source||a.source==="all"||a.source===s)&&(!a.country||a.country==="all"||a.country===g))r.set(a.type,a)})}if(r.size<5&&u.patterns){for(let i=0;i<u.patterns.length&&r.size<5;i++){const a=u.patterns[i];if(new RegExp(a._regex).test(p)&&(!a.source||a.source==="all"||a.source===s)&&(!a.country||a.country==="all"||a.country===g)&&(!r.has(a.type)||r.get(a.type)._score<a._score))r.set(a.type,a)}}const m=["top","content","sidebar","anchor","interstitial"].filter(t=>!r.has(t));if(m.length&&u.byKey){const k=[`${s}|${g}|`,`all|${g}|`,`${s}|all|`,`all|all|`];for(const t of m){for(const p of k){const c=u.byKey[p+t];if(c&&c[0]){r.set(t,c[0]);break}}}}const f=Array.from(r.values()).filter(a=>a.enabled!==false&&a.enabled!=="false"&&a.enabled!=="FALSE");console.log(`[DDMPADS] Filter: ${(performance.now()-t).toFixed(1)}ms, ${f.length} units`);return f}createSlot(a){googletag.cmd.push(()=>{let b;if(a.customPath)b="/"+CONFIG.gam+"/"+a.customPath;else{const c=[CONFIG.prefix];a.version&&c.push(a.version),(a.source!=="all"&&a.source!=="direct")&&c.push(a.source),(a.country&&a.country!=="all")&&c.push(a.country),c.push("mobile"===this.device?"mob":"desk"),c.push(a.type),b="/"+CONFIG.gam+"/"+c.join("_")}let c;if(a.outOfPage){const d="interstitial"===a.type?googletag.enums.OutOfPageFormat.INTERSTITIAL:googletag.enums.OutOfPageFormat.BOTTOM_ANCHOR;c=googletag.defineOutOfPageSlot(b,d)}else{if(!document.getElementById(a.divId))return;c=googletag.defineSlot(b,a.sizes,a.divId)}if(c){const d=a.price||this.getPrice(a.type,b);d&&c.setTargeting(CONFIG.priceKey||"ddmp_price",d),c.addService(googletag.pubads()),this.slots.push({slot:c,unit:a,finalPath:b}),a.noRefresh||this.refreshableSlots.push(c)}})}getPrice(a,b){const k=`${a}|${b}`;if(this.priceCache.has(k))return this.priceCache.get(k);const c=b.split("/").pop(),d=this.device,g=this.geo.toLowerCase(),s=this.source==="direct"?"*":this.source,p=this.path,t=PRICE_RULES.tree;let r=null;if(t&&t[d]&&t[d][c]){const geos=[g,"*"],srcs=[s,"*"],paths=[p,"*"];outer:for(const geo of geos){if(!t[d][c][geo])continue;for(const src of srcs){if(!t[d][c][geo][src])continue;for(const pth of paths){if(t[d][c][geo][src][pth]){r=t[d][c][geo][src][pth];break outer}}}}}if(!r&&PRICE_RULES.flat){const f=PRICE_RULES.flat;r=f[`${c}|${g}|${d}|${s}|${p}`]||f[`${c}|${g}|${d}|${s}|*`]||f[`${c}|${g}|${d}|*|*`]||f[`${c}|*|${d}|*|*`]||f[`*|*|*|*|*`]}r=r||CONFIG.defaultPrice||"1.00";this.priceCache.set(k,r);return r}setupGPT(){googletag.pubads().enableSingleRequest(),googletag.pubads().enableLazyLoad({fetchMarginPercent:200,renderMarginPercent:100,mobileScaling:2}),Object.entries(this.utms).forEach(([a,b])=>{"direct"!==b&&googletag.pubads().setTargeting(a,b)}),googletag.pubads().setTargeting("geo",this.geo),googletag.enableServices();const a={"top":1,"interstitial":2,"anchor":3,"content":4,"sidebar":5};this.slots.sort((b,c)=>(a[b.unit.type]||99)-(a[c.unit.type]||99)).forEach(({slot:b,unit:c})=>{(c.outOfPage||document.getElementById(c.divId))&&googletag.display(b)}),CONFIG.refresh&&CONFIG.refresh.enabled&&this.refreshableSlots.length&&this.setupRefresh()}setupRefresh(){const{delay:a=30,interval:b=30,maxCount:c=0}=CONFIG.refresh;let d=0;const e=()=>{0<c&&++d>c||(googletag.pubads().refresh(this.refreshableSlots),(0===c||d<c)&&setTimeout(e,1e3*b))};setTimeout(e,1e3*a)}checkAndLoadConsent(){const g=this.geo.toUpperCase(),eu=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","GB","IS","LI","NO"];if(!eu.includes(g)&&g!=="US"){console.log("[DDMPADS] Pa?s "+g+" n?o requer CMP");googletag.cmd.push(()=>googletag.pubads().refresh());return}console.log("[DDMPADS] Carregando CMP para "+g);this.loadCMPAsync()}loadCMPAsync(){if(window.__tcfapi){this.handleConsentUpdate();return}const s=document.createElement("script");s.src="https://cmp.quantcast.com/tcfv2/cmp2.js";s.async=!0;s.onload=()=>{console.log("[DDMPADS] CMP carregado");this.waitForConsent()};document.head.appendChild(s);window.__tcfapi=function(){(window.__tcfapiQueue=window.__tcfapiQueue||[]).push(arguments)}}waitForConsent(){let attempts=0;const check=()=>{if(window.__tcfapi){window.__tcfapi("addEventListener",2,(tcData,success)=>{if(success&&(tcData.eventStatus==="tcloaded"||tcData.eventStatus==="useractioncomplete")){console.log("[DDMPADS] Consent obtido");this.handleConsentUpdate()}});return}if(++attempts<20){setTimeout(check,100)}else{console.warn("[DDMPADS] Timeout esperando CMP");this.handleConsentUpdate()}};check()}handleConsentUpdate(){googletag.cmd.push(()=>{console.log("[DDMPADS] Atualizando an?ncios com consent");googletag.pubads().refresh()})}}(function(){const t0=performance.now();window.ddmpAds=new DDMPAds;console.log(`[DDMPADS] Inst?ncia criada em ${(performance.now()-t0).toFixed(1)}ms`);"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{const t=performance.now();ddmpAds.init();console.log(`[DDMPADS] DOMContentLoaded init em ${(performance.now()-t).toFixed(1)}ms`);window.DDMPADS_DEBUG={CONFIG,AD_UNITS,PRICE_RULES,Utils,instance:ddmpAds,totalTime:performance.now()-t0,getAllUnits:function(device){const d=device||ddmpAds.device;return AD_UNITS[d]?.all||[]}}}):(ddmpAds.init(),window.DDMPADS_DEBUG={CONFIG,AD_UNITS,PRICE_RULES,Utils,instance:ddmpAds,totalTime:performance.now()-t0,getAllUnits:function(device){const d=device||ddmpAds.device;return AD_UNITS[d]?.all||[]}})})()
})();